"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createNoNewMessagesTimeout = void 0;
const output_1 = require("@nrwl/workspace/src/utilities/output");
const environment_1 = require("./environment");
function createNoNewMessagesTimeout() {
    let value = new Object();
    let valueIsSetAt;
    return (newValue) => {
        if (value !== newValue) {
            value = newValue;
            valueIsSetAt = new Date();
        }
        else {
            if (new Date().getTime() - valueIsSetAt.getTime() > environment_1.NO_MESSAGES_TIMEOUT) {
                output_1.output.error({
                    title: 'No new messages received in 60 minutes',
                });
                process.exit(1);
            }
        }
    };
}
exports.createNoNewMessagesTimeout = createNoNewMessagesTimeout;
//# sourceMappingURL=create-no-new-messages-timeout.js.map